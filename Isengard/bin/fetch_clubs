#!/usr/bin/env ruby

require File.expand_path(File.join(File.dirname(__FILE__), '..', 'config', 'environment'))

url = 'https://raw2.github.com/ZeusWPI/hydra/master/iOS/Resources/Associations.json'
hash = JSON HTTParty.get(url)

hash.each do |club|
  next if club['internalName'] == club['parentAssociation'] or club['parentAssociation'] != 'FKCENTRAAL'

  club = Club.new do |c|
    c.internal_name = club['internalName']
    c.display_name = club['displayName']
    c.full_name = club['fullName'] unless club['fullName'].blank?
  end
  club.save
end
